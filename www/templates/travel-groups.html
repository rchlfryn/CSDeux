<ion-view view-title="Travel Groups">
  <ion-content>
    <ion-refresher on-refresh="doRefresh()"></ion-refresher>
    <div class="bar item-input-inset">
      <ion-search class="search-container" placeholder="Search" filter="search">
        <div class="item-input-wrapper">
          <i class="icon ion-android-search"></i>
          <input type="search" placeholder="{{placeholder}}" ng-model="search.value">
          <i ng-if="search.value.length > 0" ng-click="clearSearch()" class="icon ion-close"></i>
        </div>
      </ion-search>
    </div>
    <ion-list>
      <h2><b>{{day}}</b></h2>

      <div ng-repeat="group in filteredGroups = (names | filter:search.value)">
        <ion-item class="item-stable" ng-click="toggleGroup(group)" ng-class="{active: isGroupShown(group) }">
          <i class="icon" ng-class="isGroupShown(group) ? 'ion-minus' : 'ion-plus'"></i> &nbsp; {{group.coach}}
        </ion-item>
        <ion-item class="item-accordion" ng-repeat="kid in group.kids | filter:search.value" ng-show="(filteredGroups.length > 0 && search.value) || isGroupShown(group)">
          {{kid.name}}
        </ion-item>
      </div>
    </ion-list>
  </ion-content>
</ion-view>
